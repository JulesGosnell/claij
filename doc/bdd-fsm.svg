<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="420pt" height="320pt"
 viewBox="0.00 0.00 420.00 320.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 316)">
<title>bdd-fsm</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-316 416,-316 416,4 -4,4"/>

<!-- Title -->
<g id="node1" class="node">
<title>title</title>
<text xml:space="preserve" text-anchor="start" x="8" y="-294" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#666666">Bath Driven Development FSM</text>
</g>

<!-- Hat cluster for MCP -->
<g id="clust2" class="cluster">
<title>cluster_hat</title>
<polygon fill="none" stroke="gray" stroke-dasharray="5,2" points="280,-108 280,-195 400,-195 400,-108 280,-108"/>
<text xml:space="preserve" text-anchor="middle" x="340" y="-180" font-family="Times,serif" font-size="12.00">Hat-generated</text>
</g>

<!-- start -->
<g id="node2" class="node">
<title>start</title>
<ellipse fill="lightgreen" stroke="black" cx="40" cy="-150" rx="23"/>
<ellipse fill="none" stroke="black" cx="40" cy="-150" rx="27"/>
<text xml:space="preserve" text-anchor="middle" x="40" y="-147" font-family="Helvetica,sans-Serif" font-size="10.00">start</text>
</g>

<!-- stt -->
<g id="node3" class="node">
<title>stt</title>
<path fill="#e8f4e8" stroke="black" d="M155,-175 M155,-175 95,-175 89,-175 83,-169 83,-144 83,-144 83,-131 89,-125 95,-125 95,-125 155,-125 161,-125 167,-131 167,-144 167,-144 167,-169 161,-175 155,-175"/>
<text xml:space="preserve" text-anchor="middle" x="125" y="-160" font-family="Helvetica,sans-Serif" font-size="10.00">stt</text>
<text xml:space="preserve" text-anchor="middle" x="125" y="-147" font-family="Helvetica,sans-Serif" font-size="10.00">(openapi-call)</text>
<text xml:space="preserve" text-anchor="middle" x="125" y="-134" font-family="Helvetica,sans-Serif" font-size="10.00">Speech to Text</text>
</g>

<!-- start to stt -->
<g id="edge1" class="edge">
<title>start-&gt;stt</title>
<path fill="none" stroke="black" d="M67,-150 L75,-150"/>
<polygon fill="black" stroke="black" points="75,-153.5 85,-150 75,-146.5 75,-153.5"/>
<text xml:space="preserve" text-anchor="middle" x="76" y="-158" font-family="Helvetica,sans-Serif" font-size="9.00">audio</text>
</g>

<!-- mc -->
<g id="node4" class="node">
<title>mc</title>
<path fill="none" stroke="black" d="M270,-80 M270,-80 180,-80 174,-80 168,-74 168,-36 168,-36 168,-16 174,-10 180,-10 180,-10 270,-10 276,-10 282,-16 282,-36 282,-36 282,-74 276,-80 270,-80"/>
<text xml:space="preserve" text-anchor="middle" x="225" y="-66" font-family="Helvetica,sans-Serif" font-size="10.00">mc</text>
<text xml:space="preserve" text-anchor="middle" x="225" y="-53" font-family="Helvetica,sans-Serif" font-size="10.00">(llm + mcp hat)</text>
<text xml:space="preserve" text-anchor="middle" x="225" y="-40" font-family="Helvetica,sans-Serif" font-size="10.00">Master of Ceremonies</text>
<text xml:space="preserve" text-anchor="middle" x="225" y="-27" font-family="Helvetica,sans-Serif" font-size="10.00">GitHub + Clojure tools</text>
</g>

<!-- stt to mc -->
<g id="edge2" class="edge">
<title>stt-&gt;mc</title>
<path fill="none" stroke="black" d="M150,-125 C160,-115 172,-102 185,-90"/>
<polygon fill="black" stroke="black" points="187,-93 192,-83 182,-87 187,-93"/>
<text xml:space="preserve" text-anchor="middle" x="185" y="-105" font-family="Helvetica,sans-Serif" font-size="9.00">text</text>
</g>

<!-- mc_mcp -->
<g id="node7" class="node">
<title>mc_mcp</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M385,-163 M385,-163 295,-163 289,-163 283,-157 283,-135 283,-135 283,-125 289,-119 295,-119 295,-119 385,-119 391,-119 397,-125 397,-135 397,-135 397,-157 391,-163 385,-163"/>
<text xml:space="preserve" text-anchor="middle" x="340" y="-150" font-family="Helvetica,sans-Serif" font-size="10.00">mc-mcp</text>
<text xml:space="preserve" text-anchor="middle" x="340" y="-137" font-family="Helvetica,sans-Serif" font-size="10.00">(mcp-service)</text>
<text xml:space="preserve" text-anchor="middle" x="340" y="-124" font-family="Helvetica,sans-Serif" font-size="10.00">Executes tool calls</text>
</g>

<!-- mc to mc_mcp -->
<g id="edge5" class="edge">
<title>mc-&gt;mc_mcp</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M260,-80 C275,-92 292,-106 305,-117"/>
<polygon fill="black" stroke="black" points="303,-120 313,-124 308,-115 303,-120"/>
<text xml:space="preserve" text-anchor="middle" x="305" y="-98" font-family="Helvetica,sans-Serif" font-size="9.00">tool calls</text>
</g>

<!-- mc_mcp to mc -->
<g id="edge6" class="edge">
<title>mc_mcp-&gt;mc</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M305,-119 C290,-107 273,-93 260,-80"/>
<polygon fill="black" stroke="black" points="262,-77 252,-72 257,-82 262,-77"/>
<text xml:space="preserve" text-anchor="middle" x="265" y="-98" font-family="Helvetica,sans-Serif" font-size="9.00">results</text>
</g>

<!-- tts -->
<g id="node5" class="node">
<title>tts</title>
<path fill="#e8f4e8" stroke="black" d="M155,-75 M155,-75 95,-75 89,-75 83,-69 83,-44 83,-44 83,-31 89,-25 95,-25 95,-25 155,-25 161,-25 167,-31 167,-44 167,-44 167,-69 161,-75 155,-75"/>
<text xml:space="preserve" text-anchor="middle" x="125" y="-60" font-family="Helvetica,sans-Serif" font-size="10.00">tts</text>
<text xml:space="preserve" text-anchor="middle" x="125" y="-47" font-family="Helvetica,sans-Serif" font-size="10.00">(openapi-call)</text>
<text xml:space="preserve" text-anchor="middle" x="125" y="-34" font-family="Helvetica,sans-Serif" font-size="10.00">Text to Speech</text>
</g>

<!-- mc to tts -->
<g id="edge3" class="edge">
<title>mc-&gt;tts</title>
<path fill="none" stroke="black" d="M168,-50 L167,-50"/>
<polygon fill="black" stroke="black" points="167,-53.5 157,-50 167,-46.5 167,-53.5"/>
<text xml:space="preserve" text-anchor="middle" x="185" y="-58" font-family="Helvetica,sans-Serif" font-size="9.00">response</text>
</g>

<!-- end -->
<g id="node6" class="node">
<title>end</title>
<ellipse fill="lightcoral" stroke="black" cx="40" cy="-50" rx="20"/>
<ellipse fill="none" stroke="black" cx="40" cy="-50" rx="24"/>
<text xml:space="preserve" text-anchor="middle" x="40" y="-47" font-family="Helvetica,sans-Serif" font-size="10.00">end</text>
</g>

<!-- tts to end -->
<g id="edge4" class="edge">
<title>tts-&gt;end</title>
<path fill="none" stroke="black" d="M83,-50 L72,-50"/>
<polygon fill="black" stroke="black" points="72,-53.5 62,-50 72,-46.5 72,-53.5"/>
<text xml:space="preserve" text-anchor="middle" x="76" y="-58" font-family="Helvetica,sans-Serif" font-size="9.00">audio</text>
</g>

</g>
</svg>
